<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Achados e Perdidos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const btnAdicionar = document.querySelector('#adicionar');
        const inputCampo = document.querySelector('#novo_campo');
        const container = document.querySelector('#camposContainer');

        btnAdicionar.addEventListener('click', function(e) {
          e.preventDefault();         // não submete o form

          const valor = inputCampo.value.trim();
          if (!valor) return;

          // cria um .form-check
          const div = document.createElement('div');
          div.className = 'form-check';

          const chk = document.createElement('input');
          chk.type = 'checkbox';
          chk.className = 'form-check-input';
          chk.id = 'campo_' + valor;
          chk.name = 'campos[]';
          chk.value = valor;
          chk.checked = true;

          const lbl = document.createElement('label');
          lbl.className = 'form-check-label';
          lbl.htmlFor = chk.id;
          lbl.innerText = valor;

          div.appendChild(chk);
          div.appendChild(lbl);

          // adiciona ao container
          container.appendChild(div);

          // limpa e foca o input
          inputCampo.value = '';
          inputCampo.focus();
        });
      });
    </script>
  </head>
  <body>
    <header class="py-3 mb-4 border-bottom">
      <h1 class="fs-4">Achados e Perdidos - Funcionários</h1>
    </header>
    <div class="p-4">
      <h2 class="mb-4">Menu</h2>
      <ul>
        <li><a href="/admin/funcionario">Gerenciar Funcionários</a></li>
        <li><a href="/admin/categoria">Gerenciar Categorias</a></li>
        <li><a href="/admin/objeto">Gerenciar Objetos</a></li>
      </ul>

      <h3 class="mb-4">Editar Categoria</h3>
      <div class="card p-4">
        <form method="post" action="{{ url_for('categoria.categoria_edit_action', categoria_id=categoria._id) }}">
          <div class="mb-3">
            <label for="nome" class="form-label">Nome</label>
            <input type="text" class="form-control" id="nome" name="nome" value="{{ categoria.nome }}"placeholder="Nome da categoria">
          </div>

          <hr />

          <h5 class="mb-3">Campos</h5>

          <div class="mb-3">
            <label for="campo" class="form-label">Adicionar Campo</label>
            <div class="d-flex">
              <input type="text" class="form-control me-2" id="novo_campo" placeholder="Novo campo">
              <button type="button" id="adicionar" class="btn btn-success">Adicionar</button>
            </div>
          </div>

          <div id="camposContainer">
            {% for campo in categoria.campos %}
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="{{ campo }}" name="campos[]" value="{{ campo }}" checked>
                <label class="form-check-label" for="{{ campo }}">{{ campo }}</label>
              </div>
            {% endfor %}
          </div>

          <div class="d-grid mt-3">
            <button type="submit" class="btn btn-primary btn-lg">Editar</button>
          </div>
        </form>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
